{{ define "main" }}

{{ range $itemName, $counts := . }}

{{ $acc := createAcc }}

<div>
  <h2>{{ undoKebabCase $itemName}}</h2>

  {{ range $counts }}
  {{ $count := call $acc .Count }}
  <p>{{ $count.Count }} ({{ .Date }})</p>
  {{ end }}

  <!-- $acc increments by the given count, but here we only want the total. -->
  {{ $total := call $acc 0 }}

  <h3>Total: {{ $total.Total }}</h3>
</div>
{{ end }}

{{ end }}
